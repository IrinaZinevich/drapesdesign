function ajax(e,t,s,n,a){var o=new XMLHttpRequest;o.open(e,t),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?n(o.response,o.responseType):a(o.status,o.response,o.responseType))},o.send(s)}window.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("contacts-form"),t=document.getElementById("contacts-reset"),s=document.getElementById("contacts-status"),n=document.getElementById("contacts-status-text");function a(){e.reset(),e.style="display: none",s.style="display: block",n.style.color="#28a745",n.innerHTML="Данные успешно отправлнены!"}function o(){e.style="display: none",s.style="display: block",n.style.color="#dc3545",n.innerHTML="В отправке данных произошла ошибка! Попробуйте еще раз."}t.addEventListener("click",function(){e.style="display: block",s.style="display: none"}),e.addEventListener("submit",function(t){t.preventDefault();var s=new FormData(e);ajax(e.method,e.action,s,a,o)})}),$(document).ready(function(){var e=$("main").offset().top,t=76,s=$(".menu-btn"),n=$(".nav-link"),a=$(".d-header__nav--mobile"),o=$(".d-header"),i=$(".d-copyright__year"),d=$(".d-tiles__item"),l=$(".js-preview"),r=$(".js-modal"),c=$(".js-modal-open"),m=l.find(".d-preview__navBtn"),f=/iPhone|iPod|Android/i.test(navigator.userAgent),u=(new Date).getFullYear();function p(e,t){var s=$(".d-tiles__item").length;t>s?t=1:t<=0&&(t=s),e.removeClass("is-zoomed"),e.attr("data-index",t),e.attr("src","images/gallery/"+t+".jpg")}function v(){$(window).scrollTop()>e-t?o.addClass("d-header--fixed"):o.removeClass("d-header--fixed")}f||v(),i.text(u),c.on("click",function(){r.addClass("is-open"),$("body").addClass("is-modal-open")}),r.on("click",function(e){!$(e.target).hasClass("js-modal-close")&&$(e.target).closest(".js-modal-content").length||($(this).removeClass("is-open"),$("body").removeClass("is-modal-open"),$(this).find(".js-contacts-form").get(0).reset())}),n.on("click",function(e){n.removeClass("is-active"),$(this).addClass("is-active"),s.removeClass("is-active"),a.removeClass("slideInLeft"),a.addClass("slideOutLeft")}),$(window).scroll(function(){$(this).scrollTop()>$(window).height()?$(".scrollTop").fadeIn():$(".scrollTop").fadeOut(),f||v()}),s.on("click",function(){a.hasClass("slideOutLeft")?(s.addClass("is-active"),a.removeClass("slideOutLeft"),a.addClass("animated slideInLeft")):(s.removeClass("is-active"),a.removeClass("slideInLeft"),a.addClass("animated slideOutLeft"))}),d.find(".d-tiles__itemBtn").on("click",function(){var e=$(this).parent().find("img");l.addClass("is-open"),$("body").addClass("is-modal-open"),l.find("img").attr("src",e.attr("src")),l.find("img").attr("data-index",e.attr("data-index"))}),m.on("click",function(){var e=l.find("img"),t=$(this).hasClass("d-preview__navBtn--next")?+e.attr("data-index")+1:+e.attr("data-index")-1;p(e,t)}),$(document).on("keydown",function(e){var t=l.find("img"),s=0;"ArrowRight"===e.key?s=+t.attr("data-index")+1:"ArrowLeft"===e.key&&(s=+t.attr("data-index")-1),p(t,s)}),l.on("click",function(e){$(e.target).hasClass("js-preview-close")&&(l.removeClass("is-open"),$("body").removeClass("is-modal-open"),l.find("img").removeClass("is-zoomed"))}),l.find("img").on("click",function(){$(this).hasClass("is-zoomed")?$(this).removeClass("is-zoomed"):$(this).addClass("is-zoomed")})});